#!/bin/sh
#
# This is a convenience wrapper to launch or reuse an Emacs instance to open a
# given file. It doesn't wait for it to exit, so can't be used as an $EDITOR.
set -o errexit -o nounset

if ! pgrep -q -- "Emacs"; then
    open -a Emacs --args "$@"
else
    # The --args flag doesn't seem to work properly when Emacs is already
    # running, so defer to emacsclient instead.
    emacsclient --no-wait "$@"
fi
